<!DOCTYPE html>
<html lang="en">
  <%- include('../header'); %>
  <body>
    <%- include('../nav'); %>

    <!-- Start your project here-->

    <!-- Jumbotron -->
    <div class="p-5 text-center bg-light mb-5">
      <h1 class="mb-3">Music Detail</h1>
    </div>
    <!-- Jumbotron -->

    <div class="container mb-5">
      <div class="form-outline mb-3">
        <input type="text" id="singer" value="<%= result.singer %>" class="form-control" readonly />
      </div>
      <div class="form-outline mb-3">
        <input type="text" id="title" value="<%= result.title %>" class="form-control" readonly />
      </div>
    </div>
    
    <div class="container mb-5">
      <a href="/music" class="btn btn-primary">List</a>
      <a href="/music/<%=result.id%>/edit" class="btn btn-primary">Update</a>
      <button id="deleteBtn" class="btn btn-primary">Delete</button>
    </div>
    <!-- End your project here-->

    <%- include('../footer'); %>

    <script type="text/javascript">
      $(function () {
        $("#deleteBtn").on("click", function () {
          const result = confirm("삭제하시겠습니까?");
          if (result) {
            $.ajax({
              url: "/music/<%=result.id%>",
              type: "DELETE",
              success: function () {
                location.href = "/music";
              },
              error: function (request, status, error) {
                alert(request.responseJSON.message);
              },
            });
          }
        });
      });
    </script>
  </body>
</html>
