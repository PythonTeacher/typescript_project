<!DOCTYPE html>
<html lang="en">
  <%- include('../header'); %>
  <body>
    <%- include('../nav'); %>

    <!-- Start your project here-->

    <!-- Jumbotron -->
    <div class="p-5 text-center bg-light mb-5">
      <h1 class="mb-3">Music Update</h1>
    </div>
    <!-- Jumbotron -->

    <!-- HTML form 태그는 GET, POST 방식만 지원 -->
    <div class="container mb-5">
      <div class="form-outline mb-3">
        <input type="text" id="singer" value="<%= result.singer %>" class="form-control" required />
      </div>
      <div class="form-outline mb-3">
        <input type="text" id="title" value="<%= result.title %>" class="form-control" required />
      </div>
    </div>
    <div class="container mb-5">
      <button id="updateBtn", class="btn btn-primary">Update</button>
    </div>
    <!-- End your project here-->

    <%- include('../footer'); %>

    <script type="text/javascript">
      $(function () {
        $("#updateBtn").on("click", function () {
          const singer = $("#singer").val();
          const title = $("#title").val();

          $.ajax({
            url: "/music/<%=result.id%>",
            type: "PUT",
            data: { singer, title },
            success: function () {
              location.href = "/music/<%=result.id%>";
            },
            error: function (request, status, error) {
              alert(request.responseJSON.message);
            },
          });
        });
      });
    </script>
  </body>
</html>
